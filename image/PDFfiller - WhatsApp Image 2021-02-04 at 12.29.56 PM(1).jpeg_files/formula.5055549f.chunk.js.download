(this.__LOADABLE_LOADED_CHUNKS__=this.__LOADABLE_LOADED_CHUNKS__||[]).push([[10],{1476:function(e,t,n){e.exports=n(14)(877)},1477:function(e,t,n){!function(){var t=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"],n="undefined"!=typeof window,r=n&&null!=window.mozInnerScreenX;function o(e,o,i){if(!n)throw new Error("textarea-caret-position#getCaretCoordinates should only be called in a browser");var a=i&&i.debug||!1;if(a){var l=document.querySelector("#input-textarea-caret-position-mirror-div");l&&l.parentNode.removeChild(l)}var c=document.createElement("div");c.id="input-textarea-caret-position-mirror-div",document.body.appendChild(c);var s=c.style,u=window.getComputedStyle?getComputedStyle(e):e.currentStyle;s.whiteSpace="pre-wrap","INPUT"!==e.nodeName&&(s.wordWrap="break-word"),s.position="absolute",a||(s.visibility="hidden"),t.forEach(function(e){s[e]=u[e]}),r?e.scrollHeight>parseInt(u.height)&&(s.overflowY="scroll"):s.overflow="hidden",c.textContent=e.value.substring(0,o),"INPUT"===e.nodeName&&(c.textContent=c.textContent.replace(/\s/g,"Â "));var f=document.createElement("span");f.textContent=e.value.substring(o)||".",c.appendChild(f);var p={top:f.offsetTop+parseInt(u.borderTopWidth),left:f.offsetLeft+parseInt(u.borderLeftWidth)};return a?f.style.backgroundColor="#aaa":document.body.removeChild(c),p}void 0!==e.exports?e.exports=o:n&&(window.getCaretCoordinates=o)}()},1478:function(e,t,n){(function(t){var n=t.CustomEvent;e.exports=function(){try{var e=new n("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}return!1}()?n:"undefined"!=typeof document&&"function"==typeof document.createEvent?function(e,t){var n=document.createEvent("CustomEvent");return t?n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):n.initCustomEvent(e,!1,!1,void 0),n}:function(e,t){var n=document.createEventObject();return n.type=e,t?(n.bubbles=Boolean(t.bubbles),n.cancelable=Boolean(t.cancelable),n.detail=t.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n}}).call(this,n(318))},831:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"locales",function(){return o}),n.d(r,"helpHref",function(){return i}),n.d(r,"startSymbol",function(){return a}),n.d(r,"endSymbol",function(){return l}),n.d(r,"splitter",function(){return c}),n.d(r,"snfPrefix",function(){return s}),n.d(r,"recursionFormulaSign",function(){return u}),n.d(r,"splitters",function(){return f}),n.d(r,"COMMAS_REGEX",function(){return p});var o={VALID_NUMBER:"CALCULATE.VALID_NUMBER",VALID_FIELD:"CALCULATE.VALID_FIELD",VALID_DIGITS:"CALCULATE.VALID_DIGITS",VALID_FIELD_VALIDATOR:"CALCULATE.VALID_FIELD_VALIDATOR",VALID_FIELD_OPTIONS:"CALCULATE.VALID_FIELD_OPTIONS",CUSTOM_OPTIONS:"CALCULATE.CUSTOM_OPTIONS",PARSE_NUMBER:"CALCULATE.PARSE_NUMBER",DIVISION_BY_ZERO:"CALCULATE.DIVISION_BY_ZERO",EMPTY_TERM:"CALCULATE.EMPTY_TERM",EMPTY_TERM_LEFT:"CALCULATE.EMPTY_TERM_LEFT",EMPTY_TERM_RIGHT:"CALCULATE.EMPTY_TERM_RIGHT",BRACES:"CALCULATE.BRACES",UNEXPECTED_TOKEN:"CALCULATE.UNEXPECTED_TOKEN",INVALID_SYMBOL:"CALCULATE.INVALID_SYMBOL",MISSING_CLOSING_PARENTHESIS:"CALCULATE.MISSING_CLOSING_PARENTHESIS",MISSING_PARAMETERS:"CALCULATE.MISSING_PARAMETERS",MISSING_OPENING_PARENTHESIS:"CALCULATE.MISSING_OPENING_PARENTHESIS",MISSING_BRACES:"CALCULATE.MISSING_BRACES",MISSING_VARIABLE:"CALCULATE.MISSING_VARIABLE",ONLY_NUMBERIC:"CALCULATE.ONLY_NUMBERIC",DISABLE_DROPDOWN_ANOTHER_OPTION:"CALCULATE.DISABLE_DROPDOWN_ANOTHER_OPTION",RECURSION:"CALCULATE.RECURSION",UNKNOWN_FUNCTION:"CALCULATE.UNKNOWN_FUNCTION",FORMULA_DESCRIPTION_JSF:"ADD_CALCULATED_FIELD.FORMULA_DESCRIPTION_JSF",FORMULA_WITHOUT_OPERATOR:"CALCULATE.FORMULA_WITHOUT_OPERATOR",FORMULA_UNKNOWN_ERROR:"CALCULATE.FORMULA_UNKNOWN_ERROR"},i="https://www.signnow.com/features/add-calculated-fields",a="{",l="}",c="_splitter_",s="snfPrefix",u="__{-1}__",f=[" ","#","(",")","&","'","-",":","?",'"',",",".","/","[","]","_"].reduce(function(e,t,n){var r=0===n?"":String.fromCharCode(65+n);return e[t]="splitter".concat(r,"E"),e},{}),p=/,/g;function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){var t="function"==typeof Map?new Map:void 0;return(h=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return g(e,arguments,v(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),y(r,e)})(e)}function g(e,t,n){return(g=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&y(o,n.prototype),o}).apply(null,arguments)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=m(this,v(t).call(this,e))).name="FormulaError",n.message=e,n.id=e,n.interpolationParam=r,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,h(Error)),t}(),E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new b(e,t)},S=n(3),T=n.n(S),R=n(261),_=n(7),O=(n(13),n(223)),C=n(27),I=n(19),w=(n(562),n(166),n(246),n(82),n(29),n(5)),A=(n(31),n(34)),P=(n(53),n(2),I.base),N=(P.getElementsMap,P.getActiveElementId,P.getMode,P.getPdfPages,I.elements),x=(N.getElementByIdFactory,N.getFillableEnabledElements,N.getFillableElements,I.doFillableElementsExist,n(214)),L=n.n(x),k=n(385),j=n.n(k),U=n(274),M=n.n(U),D=n(24),B=n.n(D),H=n(230),F=n.n(H),V=[],W={"+":"add","-":"sub","*":"mul","/":"div",round:"round",floor:"floor",ceiling:"ceiling",min:"min",max:"max",avg:"avg",mean:"mean",sum:"sum"},G=/^\{[A-Z0-9]+[A-Z0-9_ ]*\}$/i,Y=/^\d{1,3}(?:\.\d{3})*,?(?:\d*)$/,$=/^\d{1,3}(?:,\d{3})*\.?(?:\d*)$/,z=/[+\-\/\*]/,K=/\{[^\}]*\}|(?:(?:(?:round|min|max|ceiling|floor|sum|avg|mean)\()|[^+\-*/(){]+|[+\-\/*]|\(|\))/gi,X=/\S+/,Z=/[^\+\-\/\*\(\)\{\}0-9.,]/,q=/(\{[A-Z0-9]+[A-Z0-9_ ]*\}|\{\})/gim,J=/{(.*)}/,Q=function(e){e.forEach(function(e){if(!function(e){return 0===e.replace(J,"").trim().length}(e)){var t=e.replace(q,"").trim(),n=Z.exec(t.trim());if(n){var r=n[0]&&n[0].trim()?n[0]:n.input;throw E(o.INVALID_SYMBOL,[r])}}})},ee=function(e){return e.shift()},te=function(e){var t="",n=null;try{t=e.term.match(/\{(.*?)\}/)[1]}catch(e){t=""}return t&&(n=B()(V,function(e){return e.template.name===t})),n&&n.template.formula&&(e={term:ue(n.template.formula,V)}),e},ne=function(e,t,n){for(var r=t(n),o=n[0];e(o);)o=ee(n),r=te(r),r={term:{operator:W[o],left:r,right:t(n)}},o=n[0];return e(o)||(r=te(r)),r},re=function(e,t){var n=e;return ee(t),n||(n=""),{term:n.replace(",",".")}},oe=function(e){return ne(function(){return!1},ce,e)},ie=function(e){return ne(function(e){return"*"===e||"/"===e},oe,e)},ae=function(e){return ne(function(e){return"+"===e||"-"===e},ie,e)},le=function(e,t){ee(t);var n=e.replace("(","");if(")"===t[0])throw E(o.MISSING_PARAMETERS,[n]);if(!/(?:round)\(/.test(e))throw E(o.UNKNOWN_FUNCTION);return function(e,t,n){var r,i=ae(n),a=n[0];if(/(?:ceiling|floor)/.test(t)&&")"!==a)throw E(o.MISSING_CLOSING_PARENTHESIS,[t]);if(")"===a)r=re(0,n);else if(r=ae(n),a=n[0],ee(n),")"!==a)throw E(o.MISSING_CLOSING_PARENTHESIS,[t]);return{operator:t,left:i,right:r}}(0,n,t)},ce=function(e){var t={},n=e[0];if(z.test(n)&&!J.test(n))t={term:{operator:W[n],left:re(0,e),right:ae(e)}};else{if(/^\)$/.test(n))throw E(o.MISSING_OPENING_PARENTHESIS);if(_.Pb.test(n))t=re(n,e);else if(Y.test(n))t=re(n.replace(/\./g,"").replace(",","."),e);else if($.test(n))t=re(n.replace(/,/g,""),e);else if(/(?:round|min|max|ceiling|floor|mean|avg|sum)\(/.test(n))t=le(n,e);else if(/^\($/.test(n)){if(ee(e),t=ae(e),")"!==(n=e[0]))throw E(o.MISSING_OPENING_PARENTHESIS);ee(e)}else{if(!G.test(n))return re(void 0===n?"":n.trim(),e);t=re(n,e)}}return t},se=F()(function(e){return V=e,F()(function(e){var t=L()(e)?j()(e):"";!function(e){var t=/(?:[\^*/]{2,}|(?:\+|\-)[\^*/]+)/.exec(e);if(t)throw E(o.UNEXPECTED_TOKEN,[t[0]])}(t);var n=function(e){for(var t,n=[];null!==(t=K.exec(e));)X.test(t[0])&&n.push(t[0]);return n}(t);Q(n),function(e){var t=0;if(e.forEach(function(e){if("("===e&&(t+=1),")"===e&&(t-=1),t<0)throw E(o.BRACES)}),0!==t)throw E(o.BRACES)}(n);var r=ae(n);return M()(r,"term.operator")&&(r=r.term),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(Object(A.a)()){if("string"==typeof e&&t.length){var n=T()(e.match(G),"[0]",null);if(n){var r=B()(t,function(e){return e&&e.template&&e.template.name===n.substring(1,n.length-1)});if(r&&r.subType===w.c.text.formula)return}}if(!e.operator)throw E(o.FORMULA_WITHOUT_OPERATOR)}}(r,V),r})}),ue=function(e,t){return se(t)(e)},fe=ue,pe=n(0),de=n.n(pe),me=n(609),he=n(303),ge=n(126),ye=n(519),ve=n.n(ye),be=n(1476),Ee=n.n(be),Se=n(145),Te=n.n(Se),Re=function(e){var t=e.list,n=e.deprecatedNamesList,r=void 0===n?[]:n,o=e.token;return Ee()(t,r,Te.a).filter(function(e){return ve()(e.toUpperCase(),o.toUpperCase())})},_e=function(e){return"".concat(a).concat(e).concat(l)},Oe=n(18),Ce=n(1477),Ie=n.n(Ce),we=n(1478),Ae=n.n(we);function Pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Pe(e,t,n[t])})}return e}function xe(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function je(e,t,n){return t&&ke(e.prototype,t),n&&ke(e,n),e}function Ue(e){return(Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Me(e){return(Me="function"==typeof Symbol&&"symbol"===Ue(Symbol.iterator)?function(e){return Ue(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Ue(e)})(e)}function De(e,t){return!t||"object"!==Me(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Be(e){return(Be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function He(e,t){return(He=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&He(e,t)}var Ve={ESC:27,UP:38,DOWN:40,ENTER:13,TAB:9},We=new function e(){var t=this;Le(this,e),this.startListen=function(){t.refCount||document.addEventListener("keydown",t.f),t.refCount++},this.stopListen=function(){t.refCount--,t.refCount||document.removeEventListener("keydown",t.f)},this.add=function(e,n){var r=e;return"object"!=typeof r&&(r=[r]),t.listeners[t.index]={keyCode:r,fn:n},t.index+=1,t.index},this.remove=function(e){delete t.listeners[e],t.index-=1},this.removeAll=function(){t.listeners={},t.index=0},this.index=0,this.listeners={},this.refCount=0,this.f=function(e){for(var n=e.keyCode||e.which,r=0;r<t.index;r+=1){var o=t.listeners[r],i=o.keyCode,a=o.fn;i.includes(n)&&a(e)}}},Ge=function(e){function t(){var e,n;Le(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=De(this,(e=Be(t)).call.apply(e,[this].concat(o)))).selectItem=function(){var e=n.props,t=e.item;(0,e.onSelectHandler)(t)},n.onTouchStart=function(){n.clicked=!0,n.selectItem()},n.onTouchEnd=function(e){e.preventDefault(),n.clicked&&n.props.onClickHandler(e)},n.clearClicked=function(){n.clicked=!1},n}return Fe(t,de.a.Component),je(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.item!==e.item||this.props.selected!==e.selected||this.props.style!==e.style||this.props.className!==e.className}},{key:"render",value:function(){var e=this.props,t=e.component,n=e.style,r=e.onClickHandler,o=e.item,i=e.selected,a=e.className,l=e.innerRef,c={onClick:r,onFocus:this.selectItem,onMouseEnter:this.selectItem,onTouchStart:this.onTouchStart,onTouchEnd:this.onTouchEnd,onTouchMove:this.clearClicked,onTouchCancel:this.clearClicked};return this.props.renderer?this.props.renderer({listeners:c,className:a,style:n,selected:i,item:o,ref:l}):de.a.createElement("li",{className:"rta__item ".concat(a||""),style:n},de.a.createElement("div",Object.assign({},c,{className:"rta__entity ".concat(!0===i?"rta__entity--selected":""),role:"button",tabIndex:0,ref:l}),de.a.createElement(t,{selected:i,entity:o})))}}]),t}();Ge.defaultProps={renderer:null};var Ye=function(e){function t(){var e,n;Le(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=De(this,(e=Be(t)).call.apply(e,[this].concat(o)))).state={selectedItem:null},n.onPressEnter=function(e){void 0!==e&&e.preventDefault();var t=n.props.values;n.modifyText(t[n.getPositionInList()])},n.getPositionInList=function(){var e=n.props.values,t=n.state.selectedItem;return t?e.findIndex(function(e){return n.getId(e)===n.getId(t)}):0},n.getId=function(e){var t=n.props.getTextToReplace(e);return t.key?t.key:"string"!=typeof e&&e.key?e.key:t.text},n.listeners=[],n.itemsRef={},n.modifyText=function(e){if(e){var t=n.props;(0,t.onSelect)((0,t.getTextToReplace)(e))}},n.selectItem=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n.state.selectedItem!==e&&n.setState({selectedItem:e},function(){t&&n.props.dropdownScroll(n.itemsRef[n.getId(e)])})},n.scroll=function(e){e.preventDefault();var t,r=n.props.values,o=e.keyCode||e.which,i=n.getPositionInList();switch(o){case Ve.DOWN:t=i+1;break;case Ve.UP:t=i-1;break;default:t=i}t=(t%r.length+r.length)%r.length,n.selectItem(r[t],[Ve.DOWN,Ve.UP].includes(o))},n.isSelected=function(e){var t=n.state.selectedItem;return!!t&&n.getId(t)===n.getId(e)},n}return Fe(t,de.a.Component),je(t,[{key:"componentDidMount",value:function(){this.listeners.push(We.add([Ve.DOWN,Ve.UP],this.scroll),We.add([Ve.ENTER,Ve.TAB],this.onPressEnter));var e=this.props.values;e&&e[0]&&this.selectItem(e[0])}},{key:"componentDidUpdate",value:function(e){var t=this,n=e.values,r=this.props.values;n.map(function(e){return t.getId(e)}).join("")!==r.map(function(e){return t.getId(e)}).join("")&&r&&r[0]&&this.selectItem(r[0])}},{key:"componentWillUnmount",value:function(){for(var e;this.listeners.length;)e=this.listeners.pop(),We.remove(e)}},{key:"renderItems",value:function(){var e=this,t=this.props,n=t.values,r=t.component,o=t.itemClassName,i=t.itemStyle,a=t.itemRenderer;return n.map(function(t){return de.a.createElement(Ge,{key:e.getId(t),innerRef:function(n){e.itemsRef[e.getId(t)]=n},selected:e.isSelected(t),item:t,className:o,style:i,onClickHandler:e.onPressEnter,onSelectHandler:e.selectItem,component:r,renderer:a})})}},{key:"render",value:function(){var e=this.props,t=e.style,n=e.className;return this.props.renderer?this.props.renderer({style:t,className:n,children:this.renderItems()}):de.a.createElement("ul",{className:"rta__list ".concat(n||""),style:t},this.renderItems())}}]),t}();Ye.defaultProps={itemRenderer:null,renderer:null};var $e="next",ze={X:{LEFT:"rta__autocomplete--left",RIGHT:"rta__autocomplete--right"},Y:{TOP:"rta__autocomplete--top",BOTTOM:"rta__autocomplete--bottom"}},Ke=function(e){return console.error("RTA: dataProvider fails: ".concat(e,"\n    \nCheck the documentation or create issue if you think it's bug. https://github.com/webscopeio/react-textarea-autocomplete/issues"))},Xe=function(e){function t(){var e,n;Le(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=De(this,(e=Be(t)).call.apply(e,[this].concat(o)))).state={xConfig:ze.X.RIGHT,yConfig:ze.Y.BOTTOM,dropdownHeight:0,dropdownWidth:0},n._calculatePosition=function(){if(n.containerElem&&n.ref){var e={x:0,y:0,height:0,width:0},t=n.containerElem.getClientRects()[0]||e,r=n.ref.getClientRects()[0]||e,o=t.x||t.left,i=t.y||t.top,a=r.x||r.left,l=r.y||r.top,c=r.width,s=r.height,u=o+t.width>a+c?ze.X.RIGHT:ze.X.LEFT,f=i+t.height>l+s?ze.Y.BOTTOM:ze.Y.TOP;n.setState({xConfig:u,yConfig:f,dropdownHeight:s,dropdownWidth:c})}},n.storeRef=function(e){n.ref=e,n.props.innerRef(e)},n}return Fe(t,de.a.Component),je(t,[{key:"componentDidMount",value:function(){var e=this.props.boundariesElement;if("string"==typeof e){var t=document.querySelector(e);if(!t)throw new Error("RTA: Invalid prop boundariesElement: it has to be string or HTMLElement.");this.containerElem=t}else{if(!(e instanceof HTMLElement))throw new Error("RTA: Invalid prop boundariesElement: it has to be string or HTMLElement.");this.containerElem=e}if(!this.containerElem||!this.containerElem.contains(this.ref))throw new Error("RTA: Invalid prop boundariesElement: it has to be one of the parents of the RTA.");this._calculatePosition()}},{key:"render",value:function(){var e=this.props,t=e.style,n=e.className,r=e.children,o=e.top,i=e.left,a=xe(e,["style","className","children","top","left"]),l=this.state,c=l.xConfig,s=l.yConfig,u=l.dropdownHeight,f=l.dropdownWidth,p={top:o?s===ze.Y.BOTTOM?o:o-u:0,left:i?c===ze.X.RIGHT?i:i-f:0};return this.props.renderer?this.props.renderer(Ne({},a,{children:r,className:n,ref:this.storeRef,style:Ne({},t,p)})):de.a.createElement("div",{ref:this.storeRef,className:"rta__autocomplete ".concat(c," ").concat(s," ").concat(n||""),style:Ne({},t,p)},r)}}]),t}(),Ze=function(e){function t(e){var n;Le(this,t),(n=De(this,Be(t).call(this,e))).state={top:null,left:null,currentTrigger:null,actualToken:"",data:null,value:"",dataLoading:!1,selectionEnd:0,component:null,textToReplace:null},n.getSelectionPosition=function(){return n.textareaRef?{selectionStart:n.textareaRef.selectionStart,selectionEnd:n.textareaRef.selectionEnd}:null},n.getSelectedText=function(){if(!n.textareaRef)return null;var e=n.textareaRef,t=e.selectionStart,r=e.selectionEnd;return t===r?null:n.state.value.substr(t,r-t)},n.setCaretPosition=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;n.textareaRef&&(n.textareaRef.focus(),n.textareaRef.setSelectionRange(e,e))},n.getCaretPosition=function(){return n.textareaRef?n.textareaRef.selectionEnd:0},n._onSelect=function(e){var t=n.state,r=t.selectionEnd,o=t.currentTrigger,i=t.value,a=n.props.trigger;if(o){var l=i.slice(0,r),c=l.search(new RegExp("\\".concat(o,"[^\\".concat(o).concat(a[o].allowWhitespace?"":"\\s","]"),"*$"))),s="next"===e.caretPosition?"".concat(e.text," "):e.text,u=function(e,t,n){switch(e){case"start":return n;case"next":case"end":return n+t.length;default:if(!Number.isInteger(e))throw new Error('RTA: caretPosition should be "start", "next", "end" or number.');return e}}(e.caretPosition,s,c),f=l.substring(0,c)+s,p=i.replace(l,f);n.setState({value:p,dataLoading:!1},function(){var e=n.tokenRegExpEnding.exec(s),t=e?e[0].length:1;n.lastTrigger=u-t,n.textareaRef.value=p,n.textareaRef.selectionEnd=u,n._changeHandler();var r=n.textareaRef.scrollTop;n.setCaretPosition(u),window.chrome&&(n.textareaRef.scrollTop=r)})}},n._getTextToReplace=function(e){var t=e.actualToken,r=e.currentTrigger,o=n.props.trigger[r];if(!r||!o)return null;var i=o.output;return function(e){if("object"==typeof e&&(!i||"function"!=typeof i))throw new Error('Output functor is not defined! If you are using items as object you have to define "output" function. https://github.com/webscopeio/react-textarea-autocomplete#trigger-type');if(i){var n=i(e,r);if(!n||"number"==typeof n)throw new Error('Output functor should return string or object in shape {text: string, caretPosition: string | number}.\nGot "'.concat(String(n),'". Check the implementation for trigger "').concat(r,'" and its token "').concat(t,'"\n\nSee https://github.com/webscopeio/react-textarea-autocomplete#trigger-type for more informations.\n'));if("string"==typeof n)return{text:n,caretPosition:$e};if(!n.text)throw new Error('Output "text" is not defined! Object should has shape {text: string, caretPosition: string | number}. Check the implementation for trigger "'.concat(r,'" and its token "').concat(t,'"\n'));if(!n.caretPosition)throw new Error('Output "caretPosition" is not defined! Object should has shape {text: string, caretPosition: string | number}. Check the implementation for trigger "'.concat(r,'" and its token "').concat(t,'"\n'));return n}if("string"!=typeof e)throw new Error("Output item should be string\n");return{text:"".concat(r).concat(e).concat(r),caretPosition:$e}}},n._getCurrentTriggerSettings=function(){var e=n.state.currentTrigger;return e?n.props.trigger[e]:null},n._getValuesFromProvider=function(){var e=n.state,t=e.currentTrigger,r=e.actualToken,o=n._getCurrentTriggerSettings();if(t&&o){var i=n.props.itemRenderer,a=o.dataProvider,l=o.component;if("function"!=typeof a)throw new Error("Trigger provider has to be a function!");n.setState({dataLoading:!0});var c=a(r);c instanceof Promise||(c=Promise.resolve(c)),c.then(function(e){if(!Array.isArray(e))throw new Error("Trigger provider has to provide an array!");if("function"!=typeof l&&"function"!=typeof i)throw new Error("Either component or itemRenderer should be defined!");t===n.state.currentTrigger&&(e.length?n.setState({dataLoading:!1,data:e,component:l||i}):n._closeAutocomplete())}).catch(function(e){return Ke(e.message)})}},n._getSuggestions=function(){var e=n.state,t=e.currentTrigger,r=e.data;return!t||!r||r&&!r.length?null:r},n._createRegExp=function(){var e=n.props.trigger;n.tokenRegExp=new RegExp("(".concat(Object.keys(e).sort(function(e,t){return e<t?1:e>t?-1:0}).map(function(e){return"\\".concat(e)}).join("|"),")((?:(?!\\1)[^\\s])*$)")),n.tokenRegExpEnding=new RegExp("(".concat(Object.keys(e).sort(function(e,t){return e<t?1:e>t?-1:0}).map(function(e){return"\\".concat(e)}).join("|"),")$"))},n._closeAutocomplete=function(){n.setState({data:null,dataLoading:!1,currentTrigger:null,top:null,left:null})},n._cleanUpProps=function(){var e=Ne({},n.props),t=["loadingComponent","boundariesElement","containerStyle","minChar","scrollToItem","ref","innerRef","onChange","onCaretPositionChange","className","value","trigger","listStyle","itemStyle","containerStyle","loaderStyle","className","containerClassName","listClassName","itemClassName","loaderClassName","closeOnClickOutside","dropdownStyle","dropdownClassName","movePopupAsYouType","autocompleteRenderer","listRenderer","itemRenderer"];for(var r in e)t.includes(r)&&delete e[r];return e},n._changeHandler=function(e){var t=n.props,r=t.trigger,o=t.onChange,i=t.minChar,a=t.onCaretPositionChange,l=t.movePopupAsYouType,c=n.state,s=c.top,u=c.left,f=e;f||(f=new Ae.a("change",{bubbles:!0}),n.textareaRef.dispatchEvent(f));var p=f.target,d=p.selectionEnd,m=p.value;(n.lastValueBubbledEvent=m,o&&f&&(f.persist&&f.persist(),o(f)),a)&&a(n.getCaretPosition());n.setState({value:m});var h=function(){n.lastTrigger=d-1};d<=n.lastTrigger&&h();var g=m.slice(n.lastTrigger,d),y=n.tokenRegExp.exec(g),v=y&&y[0],b=y&&y[1]||null;if(n.tokenRegExpEnding.exec(g)&&h(),v&&!(v.length<=i)||(!n.state.currentTrigger||r[n.state.currentTrigger].allowWhitespace)&&n.state.currentTrigger)if(b&&r[b].afterWhitespace&&" "!==m[d-2])n._closeAutocomplete();else{if(n.state.currentTrigger&&r[n.state.currentTrigger].allowWhitespace){if(y=new RegExp("\\".concat(n.state.currentTrigger,".*$")).exec(m.slice(0,d)),!(v=y&&y[0]))return void n._closeAutocomplete();b=Object.keys(r).find(function(e){return e===v[0]})||null}var E=v.slice(1);if(b){if(l||null===s&&null===u||n.state.currentTrigger!==b){var S=Ie()(p,d),T=S.top,R=S.left;n.setState({top:T-n.textareaRef.scrollTop||0,left:R})}n.setState({selectionEnd:d,currentTrigger:b,textToReplace:n._getTextToReplace({actualToken:E,currentTrigger:b}),actualToken:E},function(){try{n._getValuesFromProvider()}catch(e){Ke(e.message)}})}}else n._closeAutocomplete()},n._selectHandler=function(e){var t=n.props,r=t.onCaretPositionChange,o=t.onSelect;r&&r(n.getCaretPosition());o&&(e.persist(),o(e))},n._onClickAndBlurHandler=function(e){var t=n.props,r=t.closeOnClickOutside,o=t.onBlur,i=-1!==navigator.userAgent.indexOf("Edge"),a=-1!==navigator.userAgent.indexOf("Trident"),l=i||a?e.relatedTarget||document.activeElement:e.relatedTarget;n.dropdownRef&&l instanceof Node&&n.dropdownRef.contains(l)||(r&&n._closeAutocomplete(),o&&(e.persist(),o(e)))},n._onScrollHandler=function(){n._closeAutocomplete()},n._dropdownScroll=function(e){var t=n.props.scrollToItem;if(t)if(!0!==t){if("function"!=typeof t||2!==t.length)throw new Error("`scrollToItem` has to be boolean (true for default implementation) or function with two parameters: container, item.");t(n.dropdownRef,e)}else!function(e,t){var n=parseInt(getComputedStyle(t).getPropertyValue("height"),10),r=parseInt(getComputedStyle(e).getPropertyValue("height"),10)-n,o=t.offsetTop,i=e.scrollTop;o<i+r&&i<o||(e.scrollTop=o)}(n.dropdownRef,e)},n.lastTrigger=0,We.add(Ve.ESC,function(){return n._closeAutocomplete()});var r=n.props,o=r.loadingComponent,i=r.trigger,a=r.value;if(a&&(n.state.value=a),n._createRegExp(),!o)throw new Error("RTA: loadingComponent is not defined");if(!i)throw new Error("RTA: trigger is not defined");return n}return Fe(t,de.a.Component),je(t,[{key:"componentDidMount",value:function(){We.startListen()}},{key:"componentDidUpdate",value:function(e){var t=e.trigger,n=e.value,r=this.props,o=r.trigger,i=r.value;Object.keys(o).join("")!==Object.keys(t).join("")&&this._createRegExp(),n!==i&&this.lastValueBubbledEvent!==i&&(this.lastTrigger=0,this._changeHandler())}},{key:"componentWillUnmount",value:function(){We.stopListen()}},{key:"render",value:function(){var e=this,t=this.props,n=t.loadingComponent,r=t.autocompleteRenderer,o=t.listRenderer,i=t.itemRenderer,a=t.style,l=t.className,c=t.listStyle,s=t.itemStyle,u=t.boundariesElement,f=t.movePopupAsYouType,p=t.listClassName,d=t.itemClassName,m=t.dropdownClassName,h=t.dropdownStyle,g=t.containerStyle,y=t.containerClassName,v=t.loaderStyle,b=t.loaderClassName,E=this.state,S=E.left,T=E.top,R=E.dataLoading,_=E.currentTrigger,O=E.component,C=E.value,I=E.textToReplace,w=this._getSuggestions();return de.a.createElement("div",{className:"rta ".concat(!0===R?"rta--loading":""," ").concat(y||""),style:g},de.a.createElement("textarea",Object.assign({},this._cleanUpProps(),{ref:function(t){e.props.innerRef&&e.props.innerRef(t),e.textareaRef=t},className:"rta__textarea ".concat(l||""),onChange:this._changeHandler,onSelect:this._selectHandler,onScroll:this._onScrollHandler,onClick:this._onClickAndBlurHandler,onBlur:this._onClickAndBlurHandler,value:C,style:a})),(R||w)&&_&&de.a.createElement(Xe,{innerRef:function(t){e.dropdownRef=t},top:T,left:S,style:h,className:m,movePopupAsYouType:f,boundariesElement:u,textareaRef:this.textareaRef,renderer:r},w&&O&&I&&de.a.createElement(Ye,{values:w,component:O,style:c,className:p,itemClassName:d,itemStyle:s,getTextToReplace:I,onSelect:this._onSelect,dropdownScroll:this._dropdownScroll,renderer:o,itemRenderer:i}),R&&de.a.createElement("div",{className:"rta__loader ".concat(null!==w?"rta__loader--suggestion-data":"rta__loader--empty-suggestion-data"," ").concat(b||""),style:v},de.a.createElement(n,{data:w}))))}}],[{key:"getDerivedStateFromProps",value:function(e){var t=e.value;return null==t?null:{value:t}}}]),t}();Ze.defaultProps={closeOnClickOutside:!1,movePopupAsYouType:!1,value:null,minChar:1,boundariesElement:"body",scrollToItem:!0,autocompleteRenderer:null,listRenderer:null,itemRenderer:null};var qe,Je=Ze;function Qe(e){return(Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tt(e,t){return!t||"object"!==Qe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nt(e){return(nt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rt(e,t){return(rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ot,it={maxHeight:"300px",position:"relative"},at=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),tt(this,nt(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rt(e,t)}(t,pe["Component"]),n=t,(r=[{key:"render",value:function(){return function(e,t,n,r){qe||(qe="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=r;else if(i>1){for(var a=new Array(i),l=0;l<i;l++)a[l]=arguments[l+3];t.children=a}if(t&&o)for(var c in o)void 0===t[c]&&(t[c]=o[c]);else t||(t=o||{});return{$$typeof:qe,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}(C.Menu.List,{storeRef:this.storeRef,style:it},void 0,this.props.children)}}])&&et(n.prototype,r),o&&et(n,o),t}();function lt(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function ct(){return(ct=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function st(e,t,n,r){ot||(ot="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=r;else if(i>1){for(var a=new Array(i),l=0;l<i;l++)a[l]=arguments[l+3];t.children=a}if(t&&o)for(var c in o)void 0===t[c]&&(t[c]=o[c]);else t||(t=o||{});return{$$typeof:ot,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var ut=function(){return st("div",{},void 0,"loading")},ft=function(e){var t=e.style,n=e.children,r=e.ref,o=e.textareaRef,i={position:O.wrapperPositions.topLeftInner,preset:O.wrapperPresets.rta,smartPosition:!1,rtaOffset:t};return st(O.Wrapper,{locatorArgs:i,getRef:function(){return o},useArrow:!1,theme:"primary",disableClickOutside:!0,aboveModals:!0},void 0,st(C.Menu.Body,{storeRef:r,size:C.menu.bodySizes.parentWidth,attributes:R.e},void 0,n))},pt=function(e){var t=e.children;return st(at,{},void 0,t)},dt=function(e){var t=e.listeners,n=e.item,r=e.selected,o=e.ref;return de.a.createElement(C.Menu.ListItem,ct({},t,{storeRef:o}),st(C.Control,{size:C.control.sizes.smallStretched,offset:C.control.offsets.small,justify:C.control.justifies.flexStart,theme:C.control.themes.highlightedBlue,isHighlighted:r,role:C.control.roles.button,tag:C.control.tags.div,tabIndex:0,inheritRadius:!0},void 0,st(Oe.d,{size:14,weight:Oe.k.weights.regular},void 0,a,n,l)))},mt=function(e){var t=e.storeRef,n=lt(e,["storeRef"]);return de.a.createElement(Je,ct({className:"input-control__field input-control__field--type--textarea",loadingComponent:ut,autocompleteRenderer:ft,listRenderer:pt,itemRenderer:dt,ref:t},n))};mt.defaultProps={storeRef:null};var ht,gt=mt;function yt(e){return(yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vt(n,!0).forEach(function(t){_t(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function St(e){return(St=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rt(e,t){return(Rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ot=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=St(t).call(this,e),n=!o||"object"!==yt(o)&&"function"!=typeof o?Tt(r):o,_t(Tt(n),"getTextAreaRef",function(){return n.textareaRef}),_t(Tt(n),"storeTextareaInnerRef",function(e){n.textareaInnerRef=e}),_t(Tt(n),"storeTextAreaRef",function(e){n.textareaRef=e,null!==n.props.storeRtaRef&&n.props.storeRtaRef(e)}),_t(Tt(n),"callOnChange",function(e){var t=n.props.isFormulaValidationRequired?n.validateInputValue(e):e;n.props.onChange(t)}),_t(Tt(n),"dataProviderForAutocomplete",function(e){return Re({list:n.props.elementsNameList,deprecatedNamesList:n.props.elementsNamesWithoutValidation,token:e})}),_t(Tt(n),"onBlur",function(e){n.props.onBlur&&n.props.onBlur(e,n.props.isFormulaValidationRequired?n.validateInputValue(e.target.value):void 0)}),_t(Tt(n),"onChangeFormula",function(e){n.callOnChange(e.target.value)}),n.trigger=_t({},a,{dataProvider:n.dataProviderForAutocomplete,output:_e}),n.cache={lastResult:{},lastInput:null},n.textareaRef=null,n.textareaInnerRef=null,n.callOnChange(e.formula),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rt(e,t)}(t,pe["Component"]),n=t,(r=[{key:"componentDidMount",value:function(){this.textareaInnerRef&&this.textareaInnerRef.focus()}},{key:"componentDidUpdate",value:function(e){e.activeElementId===this.props.activeElementId&&e.formula===this.props.formula||this.callOnChange(this.props.formula)}},{key:"validateInputValue",value:function(e){var t=e.replace(/\n/g," ");if(this.cache.lastInput!==e){var n=this.props,r=n.elements,i=n.elementsNameList,a=n.validators,l=[];try{var c=Object(me.a)({element:{template:{formula:t}},elements:r,validateHelpers:bt({},Object(ge.f)(),{elementsNameList:i}),regExpValidatorsMap:Object(he.a)(a)}),s=c&&B()(c,function(e){return!e.isValid});s?l.push(E(s.error.errorText,s.error.interpolationParam)):fe(t,r)}catch(e){e instanceof b?l.push(e):l.push(E(o.FORMULA_UNKNOWN_ERROR))}this.cache.lastResult={inputValue:e,formula:t,validation:{isValid:0===l.length,errors:l}},this.cache.lastInput=e}return this.cache.lastResult}},{key:"render",value:function(){return function(e,t,n,r){ht||(ht="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=r;else if(i>1){for(var a=new Array(i),l=0;l<i;l++)a[l]=arguments[l+3];t.children=a}if(t&&o)for(var c in o)void 0===t[c]&&(t[c]=o[c]);else t||(t=o||{});return{$$typeof:ht,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}(gt,{trigger:this.trigger,value:this.props.formula,onChange:this.onChangeFormula,onBlur:this.onBlur,onFocus:this.props.onFocus,minChar:0,onCaretPositionChange:this.props.onCaretPositionChange,storeRef:this.storeTextAreaRef,innerRef:this.storeTextareaInnerRef})}}])&&Et(n.prototype,r),i&&Et(n,i),t}();_t(Ot,"defaultProps",{onBlur:null,activeElementId:null,onCaretPositionChange:null,storeRtaRef:null,onFocus:null,formula:"",elementsNamesWithoutValidation:[],isFormulaValidationRequired:!0,validators:null});t.default={components:{FormulaRtaProvider:Ot},objects:{locale:o,consts:r},functions:{parser:fe}}}}]);
//# sourceMappingURL=formula.5055549f.chunk.js.map